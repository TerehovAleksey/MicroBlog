@inject IPostService PostService

@if (_posts is not null)
{
    <SidebarCard Title="@Strings.MostPopular">
        @foreach (var post in _posts)
        {
            <SidebarPost Post="post" />
        }
    </SidebarCard>
}

@code {

    private IEnumerable<BasePostModel>? _posts;

    protected override async Task OnInitializedAsync()
    {
        var posts = await PostService.GetMostPopularPostsAsync();
        _posts = posts?.Select(p => new BasePostModel
            {
                Date = p.DatePublished,
                Title = p.Title,
                Cover = p.Cover,
                Slug = p.Slug
            });
    }

}